<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>学子商城登录</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="./css/comm.css">
    <link rel="stylesheet" href="./css/login.css">
    <script>
        function show_uname() {
            mid_d1.innerHTML = "用户名长度为6-10位！"
        }
        function check_uname() {
            var $uanme = uname.value;
            if (!$uanme) {
                mid_d1.innerHTML = "用户名不能为空！"
            } else if ($uanme.length < 6 || $uanme.length > 10) {
                mid_d1.innerHTML = "用户名格式错误！"
            } else {
                mid_d1.innerHTML = "用户名正确！"
            }

        }
        function show_upwd() {
            mid_d2.innerHTML = "密码长度为4-8位！"
        }
        function check_upwd() {
            var $upwd = upwd.value;
            if (!$upwd) {
                mid_d2.innerHTML = "密码不能为空！"
            } else if ($upwd.length < 4 || $upwd.length > 8) {
                mid_d2.innerHTML = "密码格式错误！"
            } else {
                mid_d2.innerHTML = "密码正确！"
            }

        }
        function login() {
            var $uname = uname.value;
            var $upwd = upwd.value;

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var str = xhr.responseText;
                    if (str == 1) {
                        alert("登录成功");
                        location.href = "http://127.0.0.1:8080/index.html";
                    } else {
                        alert("登录失败");
                    }
                }
            }
            xhr.open("post", "/user/login", true);
            // var formdata = `uanme=${ $uanme }&upwd= ${ $upwd }`;
            var formdata = "uname=" + $uname + "&upwd=" + $upwd;
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send(formdata);

        }



    </script>

</head>

<body>
    <!-- 头部 -->
    <header>
        <div class="container">
            <div class="mt-3 mb-3 clearfix">
                <img class="float-left" src="./img/logo.png" alt="">
                <div class="float-left h4 ml-3 mt-2">欢迎登录</div>
            </div>
        </div>
    </header>

    <div class="middle">
        <div class="login_bg ">
            <div class="row no-gutters mid_dl py-2">
                <div class="col-6 text-white">登录学子商城</div>
                <div class="col-6  text-right font_small pt-1 pr-3">
                    <a class="text-white" href="#">新用户注册</a>
                </div>
                <!-- 登录 -->
            </div>
            <!-- inp1 -->
            <div class="mt-3">
                <input class="w-100 mid_inp1 pl-2 font_small" onblur="check_uname()" onfocus="show_uname()" type="text"
                    name="" id="uname" placeholder="请输入您的用户名">
                <div id="mid_d1" class="text-danger font_small"></div>
            </div>
            <!-- inp2 -->
            <div class="mt-4">
                <input class="w-100 mid_inp2 pl-2 font_small" onfocus="show_upwd()" onblur="check_upwd()" type="text"
                    name="" id="upwd" placeholder="请输入您的密码">
                <div id="mid_d2" class="text-danger font_small"></div>
            </div>
            <!-- anniu -->
            <div>
                <div class="row no-gutters">
                    <div class="col-6 mt-3 pl-1">
                        <input type="checkbox" name="" id="btn">
                        <label for="btn" class="text-white font_small">自动登录</label>
                    </div>
                    <div class="col-6 text-right anniu_mm">
                        <div class="font_small">
                            <a class="text-white" href="#">忘记密码？</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 登录 -->
            <div class="mt-1">
                <button class="btn btn-primary w-100" onclick="login()">登录</button>
            </div>
        </div>
    </div>
    </div>


    <!-- 引入底部 -->
    <footer>
        <iframe class="my_footer" src="footer.html" frameborder="0" scrolling="no"></iframe>
    </footer>
</body>

</html>